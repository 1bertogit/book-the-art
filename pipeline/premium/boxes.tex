% ═══════════════════════════════════════════════════════════════════════════
% BOXES CLÍNICOS — The Art of Eyelid Surgery
% ═══════════════════════════════════════════════════════════════════════════
% Boxes coloridos para conteúdo didático
% Tipos: Atenção, Pérola Clínica, Técnica, Evidência, Nota
% ═══════════════════════════════════════════════════════════════════════════

\usepackage{tcolorbox}
\tcbuselibrary{skins,breakable,hooks}

% ───────────────────────────────────────────────────────────────────────────
% BOX: ATENÇÃO (vermelho)
% Uso: alertas de segurança, contraindicações, riscos
% ───────────────────────────────────────────────────────────────────────────

\newtcolorbox{alertbox}[1][]{
  enhanced,
  breakable,
  colback=alertbg,
  colframe=alertred,
  boxrule=1.5pt,
  arc=3pt,
  left=12pt,
  right=12pt,
  top=10pt,
  bottom=10pt,
  fonttitle=\bfseries\sffamily\color{alertred},
  title={\raisebox{-1pt}{\Large !} ATENÇÃO},
  attach boxed title to top left={yshift=-2mm,xshift=5mm},
  boxed title style={
    colback=white,
    colframe=white,
    boxrule=0pt,
  },
  #1
}

% ───────────────────────────────────────────────────────────────────────────
% BOX: PÉROLA CLÍNICA (dourado)
% Uso: insights práticos, truques do autor, sabedoria clínica
% ───────────────────────────────────────────────────────────────────────────

\newtcolorbox{pearlbox}[1][]{
  enhanced,
  breakable,
  colback=pearlbg,
  colframe=pearlgold,
  boxrule=1.5pt,
  arc=3pt,
  left=12pt,
  right=12pt,
  top=10pt,
  bottom=10pt,
  fonttitle=\bfseries\sffamily\color{pearlgold},
  title={\raisebox{-1pt}{\Large *} PÉROLA CLÍNICA},
  attach boxed title to top left={yshift=-2mm,xshift=5mm},
  boxed title style={
    colback=white,
    colframe=white,
    boxrule=0pt,
  },
  #1
}

% ───────────────────────────────────────────────────────────────────────────
% BOX: TÉCNICA (verde)
% Uso: passos técnicos, dicas de execução, manobras
% ───────────────────────────────────────────────────────────────────────────

\newtcolorbox{techbox}[1][]{
  enhanced,
  breakable,
  colback=techbg,
  colframe=techgreen,
  boxrule=1.5pt,
  arc=3pt,
  left=12pt,
  right=12pt,
  top=10pt,
  bottom=10pt,
  fonttitle=\bfseries\sffamily\color{techgreen},
  title={\raisebox{-1pt}{\Large +} TÉCNICA},
  attach boxed title to top left={yshift=-2mm,xshift=5mm},
  boxed title style={
    colback=white,
    colframe=white,
    boxrule=0pt,
  },
  #1
}

% ───────────────────────────────────────────────────────────────────────────
% BOX: EVIDÊNCIA (azul)
% Uso: referências a estudos, literatura, dados científicos
% ───────────────────────────────────────────────────────────────────────────

\newtcolorbox{evidencebox}[1][]{
  enhanced,
  breakable,
  colback=evidencebg,
  colframe=evidenceblue,
  boxrule=1.5pt,
  arc=3pt,
  left=12pt,
  right=12pt,
  top=10pt,
  bottom=10pt,
  fonttitle=\bfseries\sffamily\color{evidenceblue},
  title={\raisebox{-1pt}{\Large i} EVIDÊNCIA},
  attach boxed title to top left={yshift=-2mm,xshift=5mm},
  boxed title style={
    colback=white,
    colframe=white,
    boxrule=0pt,
  },
  #1
}

% ───────────────────────────────────────────────────────────────────────────
% BOX: NOTA (azul claro)
% Uso: blockquotes genéricos, observações, notas de rodapé expandidas
% ───────────────────────────────────────────────────────────────────────────

\newtcolorbox{notebox}[1][]{
  enhanced,
  breakable,
  colback=lightblue,
  colframe=medblue,
  boxrule=1pt,
  arc=2pt,
  left=10pt,
  right=10pt,
  top=8pt,
  bottom=8pt,
  #1
}

% ───────────────────────────────────────────────────────────────────────────
% CONVERSÃO: Blockquotes → Notebox
% ───────────────────────────────────────────────────────────────────────────

\usepackage{etoolbox}
\AtBeginEnvironment{quote}{\begin{notebox}}
\AtEndEnvironment{quote}{\end{notebox}}
